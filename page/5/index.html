<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.3',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="iOS,linux,shell,">
<meta name="keywords" content="iOS,ZCW,Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="ZCW">
<meta property="og:url" content="https:&#x2F;&#x2F;www.zcwlwen.cn&#x2F;page&#x2F;5&#x2F;">
<meta property="og:site_name" content="ZCW">
<meta property="og:description" content="iOS,linux,shell,">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.zcwlwen.cn/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>ZCW</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZCW</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">ZCW</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/12/03/%E9%98%BF%E9%87%8C%E4%BA%91IPv6%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/12/03/%E9%98%BF%E9%87%8C%E4%BA%91IPv6%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">阿里云配置IPV6</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-12-03 15:15:28" itemprop="dateCreated datePublished" datetime="2016-12-03T15:15:28+08:00">2016-12-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%98%BF%E9%87%8C%E4%BA%91/" itemprop="url" rel="index">
                    <span itemprop="name">阿里云</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="阿里云配置IPV6"><a href="#阿里云配置IPV6" class="headerlink" title="阿里云配置IPV6"></a>阿里云配置IPV6</h1><h2 id="注册创建IPV6通道"><a href="#注册创建IPV6通道" class="headerlink" title="注册创建IPV6通道"></a>注册创建IPV6通道</h2><p>Hurricane Electric 是一家位于美国的全球互联网服务提供商。该公司提供IPv4和IPv6接入 以及位于美国圣荷西的数据中心服务。(维基百科）</p>
<p><a href="https://www.tunnelbroker.net/" target="_blank" rel="noopener">Hurricane Electric官网</a></p>
<ol>
<li><p>登录Hurricane Electric官网，注册账号<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-072712.jpg" alt></p>
</li>
<li><p>填写相关注册信息并且需要验证邮箱。<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-072731.jpg" alt></p>
</li>
<li><p>邮箱验证通过后，登录选择<code>Create Regular Tunnel</code>.<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-072746.jpg" alt></p>
</li>
<li><p>在<code>IPv4 Endpoint</code>处填写IPv4地址，选择HongKong.HK。点击Create Tunnel，创建成功。<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-072758.jpg" alt></p>
</li>
<li><p>创建成功后可以得到下面的信息<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-072804.jpg" alt></p>
</li>
</ol>
<h2 id="配置ECS使其支持IPv6"><a href="#配置ECS使其支持IPv6" class="headerlink" title="配置ECS使其支持IPv6"></a>配置ECS使其支持IPv6</h2><ul>
<li>编辑<code>/etc/sysctl.conf</code>，将下面三项的配置改为0。后保存退出后。然后执行<code>sysctl -p</code>更新配置。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net.ipv6.conf.all.disable_ipv6 = 0</span><br><span class="line">net.ipv6.conf.default.disable_ipv6 = 0</span><br><span class="line">net.ipv6.conf.lo.disable_ipv6 = 0</span><br></pre></td></tr></table></figure></li>
<li>编辑网卡配置<code>/etc/network/interfaces</code>，在底部添加一下内容。（<IPv4>替换你的IPv4地址，<IPv6>替换成你申请到的IPv6的地址。IPv6地址格式为2001:470:xxxx:xxxx，不包括后面的::1/64或者::2/64）</IPv6></IPv4></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">auto he-ipv6</span><br><span class="line">iface he-ipv6 inet6 v4tunnel</span><br><span class="line">address &lt;IPV6&gt;::2</span><br><span class="line">netmask 64</span><br><span class="line">remote &lt;HE 的 Server IPv4 Address&gt;</span><br><span class="line">local &lt;IPv4&gt;</span><br><span class="line">endpoint any</span><br><span class="line">ttl 255</span><br><span class="line">gateway &lt;IPv6&gt;::1</span><br><span class="line">up ip -6 route add 2000::/3 via ::&lt;HE 的 Server IPv4 Address&gt; dev he-ipv6</span><br><span class="line">up ip -6 addr add &lt;IPv6&gt;::1:1/128 dev he-ipv6</span><br><span class="line">up ip -6 addr add &lt;IPv6&gt;::2:1/128 dev he-ipv6</span><br><span class="line">down ip -6 route flush dev he-ipv6</span><br></pre></td></tr></table></figure>

<ul>
<li>重启服务器<code>server nginx restart</code></li>
<li>执行<code>ifup he-ipv6</code>开启IPv6</li>
<li>然后，执行<code>ifconig</code>查看有没有he-ipv6的网卡</li>
</ul>
<h2 id="配置Nginx使其监听IPv6端口"><a href="#配置Nginx使其监听IPv6端口" class="headerlink" title="配置Nginx使其监听IPv6端口"></a>配置Nginx使其监听IPv6端口</h2><p>编辑<code>/usr/local/nginx/conf/nginx.conf</code></p>
<p>监听http请求80端口，https请求443端口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 80; </span><br><span class="line">  listen [::]:80; // 监听 IPv6 的 80 端口</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 443 ;</span><br><span class="line">  listen [::]:443 ; // 监听 IPv6 的 443 端口</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果没有配置https的话，只需要监听80端口。</p>
<h2 id="配置DNS使其支持IPv6解析"><a href="#配置DNS使其支持IPv6解析" class="headerlink" title="配置DNS使其支持IPv6解析"></a>配置DNS使其支持IPv6解析</h2><p>登录阿里云后台，添加AAAA类型的域名解析域名解析。记录值填写Client IPv6 Address的地址。去掉后面的/64。<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-072812.jpg" alt></p>
<h2 id="测试IPv6配置是否成功"><a href="#测试IPv6配置是否成功" class="headerlink" title="测试IPv6配置是否成功"></a>测试IPv6配置是否成功</h2><p>测试网址：</p>
<p><a href="http://ipv6-test.com/validate.php" target="_blank" rel="noopener">http://ipv6-test.com/validate.php</a></p>
<p>输入网址，点击测试<br>测试通过如下显示，说明网站支持IPv6。<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-072818.jpg" alt></p>
<p>不支持IPv6如下显示<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-072822.jpg" alt></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/12/02/HTTPS%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/12/02/HTTPS%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">HTTPS配置</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-12-02 15:15:28" itemprop="dateCreated datePublished" datetime="2016-12-02T15:15:28+08:00">2016-12-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HTTPS配置文档"><a href="#HTTPS配置文档" class="headerlink" title="HTTPS配置文档"></a>HTTPS配置文档</h1><h2 id="配置前需要了解的内容"><a href="#配置前需要了解的内容" class="headerlink" title="配置前需要了解的内容"></a>配置前需要了解的内容</h2><h3 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h3><p><strong>https</strong>：<br>超文本传输安全协议（英语：Hypertext Transfer Protocol Secure，缩写：HTTPS，也被称为HTTP over TLS，HTTP over SSL或HTTP Secure）是一种网络安全传输协议。在计算机网络上，HTTPS经由超文本传输协议进行通信，但利用SSL/TLS来对数据包进行加密。HTTPS开发的主要目的，是提供对网络服务器的身份认证，保护交换数据的隐私与完整性。这个协议由网景公司（Netscape）在1994年首次提出，随后扩展到互联网上。(摘自维基百科)</p>
<p><strong>SSL证书</strong>：<br>SSL（安全套接层，Secure Sockets Layer）是一种安全协议，目的是为互联网通信，提供安全及数据完整性保障。SSL证书遵循SSL协议，可安装在服务器上，实现数据传输加密。SSL证书实际上就是CA机构对用户公钥的认证，内容包括电子签证机关的信息、公钥用户信息、公钥、权威机构的签字和有效期等。</p>
<p><strong>CA机构</strong>：CA（数字证书认证，Certificate Authority）机构，是承担公钥合法性检验的第三方权威机构，负责指定政策、步骤来验证用户的身份，并对SSL证书进行签名，确保证书持有者的身份和公钥的所有权。CA机构为每个使用公开密钥的用户发放一个SSL证书，SSL证书的作用是证明证书中列出的个人/企业合法拥有证书中列出的公开密钥。CA机构的数字签名使得攻击者不能伪造和篡改证书。</p>
<h3 id="https的优势"><a href="#https的优势" class="headerlink" title="https的优势"></a>https的优势</h3><ul>
<li><strong>防流量劫持</strong> — 全站Https是根治运营商、中间人流量劫持的解决方案，不仅可以杜绝网页中被插入的小广告，更可以保护用户隐私安全。</li>
<li><strong>提升搜索排名</strong>—采用Https可以帮忙搜索排名的提升，提高站点的可信度和品牌形象。</li>
<li><strong>杜绝钓鱼网站</strong>Https地址栏绿色图标可以帮助用户识别出钓鱼网站，保障用户和企业的利益不受损害，增强用户信任。</li>
</ul>
<h2 id="申请证书"><a href="#申请证书" class="headerlink" title="申请证书"></a>申请证书</h2><blockquote>
<p>目前腾讯云、阿里云、七牛都可以申请一年免费的赛门铁克证书。<br>这里用腾讯云做例子。申请一年免费的ssl证书。在同一平台下去申请证书，可以自动添加DNS解析。这里是在腾讯云申请的免费证书，ECS在阿里云上，所以需要手动添加DNS解析。</p>
</blockquote>
<p><a href="https://www.qcloud.com/document/product/400/6814" target="_blank" rel="noopener">申请证书官方文档</a></p>
<p>要注意的地方：</p>
<ul>
<li>域名身份认证是手动添加DNS解析。因为我的服务器实在阿里云，所以选择手动添加DNS解析。</li>
</ul>
<p><strong>手动添加DNS解析参考</strong></p>
<p><a href="https://www.qcloud.com/document/product/400/4142#2.-.E6.89.8B.E5.8A.A8dns.E9.AA.8C.E8.AF.81" target="_blank" rel="noopener">DNS解析官方文档</a></p>
<p>进入阿里云后台，选择云解析DNS<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-073006.jpg" alt><br>选择你要解析的域名，点击解析<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-073011.jpg" alt><br>添加一条CNAME解析<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-073015.jpg" alt><br>记录类型为CNAME，主机记录和记录值查看官方文档。在生成ssl证书时会生成。</p>
<ul>
<li>如果绑定的域名是<a href="http://www.amai8.com(一级域名)" target="_blank" rel="noopener">www.amai8.com(一级域名)</a><br>填写CNAME解析的时候DNS记录如下 <strong>s8s1kflls83vbfgsoakakqnzq9bgy20c</strong>.amai8.com  –CName–&gt;  s20161208165641.amai8.com</li>
<li>如果绑定的域名是api.amai8.com(二级域名)<br>填写的CNAME解析的DNS记录如下</li>
</ul>
<p><strong>s8s1kflls83vbfgsoakakqnz9bgy20ca.api</strong>.amai8.com  –CName–&gt;  s20161208165641.api.amai8.com</p>
<p>添加CNAME解析时，主机记录值要去掉你的域名：主机记录值为上面加粗字体。注意api.amai8.com不要丢掉后面的<code>.api</code>。不然添加域名解析会不正确。证书不能颁发，只有DNS添加成功，才能颁发证书。</p>
<p>添加解析成功后，过一段时间，证书就可以申请通过。<br>如果长时间没有证书都没有颁发，去检查添加的CNAME是否正确。</p>
<p>阿里云添加解析时。首次添加解析，生效很快，如果修改解析的话生效时间会慢很多。解析生效后证书才会颁发。</p>
<p>证书申请成功后，可以在腾讯云后台查看证书详情，点击下载按钮下载证书。<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-073025.jpg" alt></p>
<p>下载后解压得到三个文件夹：分别是Apache、IIS、Nginx 服务器的证书文件</p>
<h2 id="ECS配置证书（没有负载均衡情况下）"><a href="#ECS配置证书（没有负载均衡情况下）" class="headerlink" title="ECS配置证书（没有负载均衡情况下）"></a>ECS配置证书（没有负载均衡情况下）</h2><p>这里服务器是Nginx，所以以Nginx为例：</p>
<ul>
<li><p><strong>获取证书</strong> Nginx文件夹内获得SSL证书文件 1_<a href="http://www.domain.com_bundle.crt" target="_blank" rel="noopener">www.domain.com_bundle.crt</a> 和私钥文件 2_<a href="http://www.domain.com.key" target="_blank" rel="noopener">www.domain.com.key</a>,<br>1_<a href="http://www.domain.com_bundle.crt" target="_blank" rel="noopener">www.domain.com_bundle.crt</a> 文件包括两段证书代码 “—–BEGIN CERTIFICATE—–”和“—–END CERTIFICATE—–”,<br>2_<a href="http://www.domain.com.key" target="_blank" rel="noopener">www.domain.com.key</a> 文件包括一段私钥代码“—–BEGIN RSA PRIVATE KEY—–”和“—–END RSA PRIVATE KEY—–”。</p>
</li>
<li><p><strong>证书安装</strong> 将域名 <a href="http://www.domain.com" target="_blank" rel="noopener">www.domain.com</a> 的证书文件1_<a href="http://www.domain.com_bundle.crt" target="_blank" rel="noopener">www.domain.com_bundle.crt</a> 、私钥文件2_<a href="http://www.domain.com.key保存到同一个目录，例如/usr/local/nginx/conf目录下。" target="_blank" rel="noopener">www.domain.com.key保存到同一个目录，例如/usr/local/nginx/conf目录下。</a><br>更新Nginx根目录下 conf/nginx.conf 文件如下：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen    80;</span><br><span class="line">        server_name   www.domain.com; #证书绑定的域名</span><br><span class="line">        rewrite ^(.*) https://$server_name$1 permanent;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        listen 443;</span><br><span class="line">        server_name www.domain.com; #填写绑定证书的域名</span><br><span class="line">        ssl on;</span><br><span class="line">        ssl_certificate 1_www.domain.com_bundle.crt; #证书地址 在当前目录直接写名字就可以也可以写全路径</span><br><span class="line">        ssl_certificate_key 2_www.domain.com.key;</span><br><span class="line">        ssl_session_timeout 5m;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #按照这个协议配置</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html; #站点目录</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：http默认访问的是80端口。https访问的是443端口。<br>对于用户不知道网站可以进行https访问的情况下，让服务器自动把http的请求重定向到https。<br>在服务器这边的话配置的话，可以在页面里加js脚本，也可以在后端程序里写重定向，当然也可以在web服务器来实现跳转。</p>
<p>Nginx是支持rewrite的（只要在编译的时候没有去掉pcre）<br>在<code>rewrite ^(.*) https://$server_name$1</code><br>这样就可以实现80进来的请求，重定向为https了。</p>
<p><a href="https://www.qcloud.com/document/product/400/4143#2.-nginx.E8.AF.81.E4.B9.A6.E9.83.A8.E7.BD.B2" target="_blank" rel="noopener">证书安装官方文档</a></p>
<p>这里服务器是Nginx，所以以Nginx为例：</p>
<ul>
<li><p><strong>获取证书</strong> Nginx文件夹内获得SSL证书文件 1_<a href="http://www.domain.com_bundle.crt" target="_blank" rel="noopener">www.domain.com_bundle.crt</a> 和私钥文件 2_<a href="http://www.domain.com.key" target="_blank" rel="noopener">www.domain.com.key</a>,<br>1_<a href="http://www.domain.com_bundle.crt" target="_blank" rel="noopener">www.domain.com_bundle.crt</a> 文件包括两段证书代码 “—–BEGIN CERTIFICATE—–”和“—–END CERTIFICATE—–”,<br>2_<a href="http://www.domain.com.key" target="_blank" rel="noopener">www.domain.com.key</a> 文件包括一段私钥代码“—–BEGIN RSA PRIVATE KEY—–”和“—–END RSA PRIVATE KEY—–”。</p>
</li>
<li><p><strong>证书安装</strong> 将域名 <a href="http://www.domain.com" target="_blank" rel="noopener">www.domain.com</a> 的证书文件1_<a href="http://www.domain.com_bundle.crt" target="_blank" rel="noopener">www.domain.com_bundle.crt</a> 、私钥文件2_<a href="http://www.domain.com.key保存到同一个目录，例如/usr/local/nginx/conf目录下。" target="_blank" rel="noopener">www.domain.com.key保存到同一个目录，例如/usr/local/nginx/conf目录下。</a><br>更新Nginx根目录下 conf/nginx.conf 文件如下：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen    80;</span><br><span class="line">        server_name   www.domain.com; #证书绑定的域名</span><br><span class="line">        rewrite ^(.*) https://$server_name$1 permanent;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        listen 443;</span><br><span class="line">        server_name www.domain.com; #填写绑定证书的域名</span><br><span class="line">        ssl on;</span><br><span class="line">        ssl_certificate 1_www.domain.com_bundle.crt; #证书地址 在当前目录直接写名字就可以也可以写全路径</span><br><span class="line">        ssl_certificate_key 2_www.domain.com.key;</span><br><span class="line">        ssl_session_timeout 5m;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #按照这个协议配置</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html; #站点目录</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：http默认访问的是80端口。https访问的是443端口。<br>对于用户不知道网站可以进行https访问的情况下，让服务器自动把http的请求重定向到https。<br>在服务器这边的话配置的话，可以在页面里加js脚本，也可以在后端程序里写重定向，当然也可以在web服务器来实现跳转。</p>
<p>Nginx是支持rewrite的（只要在编译的时候没有去掉pcre）<br>在<code>rewrite ^(.*) https://$server_name$1</code><br>这样就可以实现80进来的请求，重定向为https了。</p>
<p><a href="https://www.qcloud.com/document/product/400/4143#2.-nginx.E8.AF.81.E4.B9.A6.E9.83.A8.E7.BD.B2" target="_blank" rel="noopener">证书安装官方文档</a></p>
<h2 id="负载均衡配置https"><a href="#负载均衡配置https" class="headerlink" title="负载均衡配置https"></a>负载均衡配置https</h2><ol>
<li>登录到阿里云后台，选择负载均衡：<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2017-01-12-051716.jpg" alt></li>
<li>可以创建新的负载均衡，或者修改之前的负载均衡。选择负载均衡，点击服务器，添加相关ECS。<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2017-01-12-051742.jpg" alt><br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2017-01-12-051804.jpg" alt></li>
<li>添加监听。点击添加监听，前端端口选择HTTPS：443，后端端口选择你要监听的ECS上的端口，这里是80端口。然后选择服务器证书，选择新建证书，填写证书名称，添加证书内容，私钥内容。然后再添加一个监听，监听80端口，前端端口选择TCP或者HTTP：80，后端端口：80。确认后添加监听。</li>
</ol>
<blockquote>
<p>这里的证书内容是你的申请的证书中的内容，格式一定为pem编码。下载下来的证书是<code>.crt</code>文件。用记事本打开，复制其中的内容，这里需要注意，文件中包含两个证书内容，前面是域名证书后面是中级CA证书，复制的时候要去掉中间的空行。<br>私钥内容也一定要为pem编码，用记事本打开<code>.key</code>文件，复制里面的内容到私钥一栏中。填好检查后，点击新建。回到上一步选择你刚新建的证书。点击下一步，点击确认。</p>
</blockquote>
<p><strong>添加监听</strong><br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2017-01-12-051827.jpg" alt><br><strong>新建证书</strong><br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2017-01-12-051834.jpg" alt><br>添加好80端口(http)、443端口(https)的监听。会显示如下，如果显示异常检查监听是否正确。<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2017-01-12-051841.jpg" alt></p>
<p><strong>苹果ATS测试命令</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nscurl --ats-diagnostics --verbose  https://domin.com</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/11/04/iOS%E5%BC%80%E5%8F%91Tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/11/04/iOS%E5%BC%80%E5%8F%91Tips/" class="post-title-link" itemprop="url">iOS开发Tips</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-11-04 15:52:27" itemprop="dateCreated datePublished" datetime="2016-11-04T15:52:27+08:00">2016-11-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="iOS开发Tips"><a href="#iOS开发Tips" class="headerlink" title="iOS开发Tips"></a>iOS开发Tips</h1><h3 id="TableView-Cell留白问题"><a href="#TableView-Cell留白问题" class="headerlink" title="TableView Cell留白问题"></a>TableView Cell留白问题</h3><p>TableView的在iPad下横屏显示的时候右侧会有很多留白。</p>
<p>解决办法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tableview.cellLayoutMarginsFollowReadableWidth = NO;</span><br></pre></td></tr></table></figure>

<h3 id="TableView多余的分割线"><a href="#TableView多余的分割线" class="headerlink" title="TableView多余的分割线"></a>TableView多余的分割线</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tableView.tableFooterView = [UIView new];</span><br></pre></td></tr></table></figure>

<h3 id="TableViewCell右侧箭头"><a href="#TableViewCell右侧箭头" class="headerlink" title="TableViewCell右侧箭头"></a>TableViewCell右侧箭头</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;</span><br></pre></td></tr></table></figure>

<h3 id="判断App是不是第一次启动"><a href="#判断App是不是第一次启动" class="headerlink" title="判断App是不是第一次启动"></a>判断App是不是第一次启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//   使用NSUserDefaults来判断程序是否第一次启动</span><br><span class="line">    NSUserDefaults *TimeOfBootCount = [NSUserDefaults standardUserDefaults];</span><br><span class="line">    if (![TimeOfBootCount valueForKey:@&quot;time&quot;]) &#123;</span><br><span class="line">        [TimeOfBootCount setValue:@&quot;sd&quot; forKey:@&quot;time&quot;];</span><br><span class="line">        NSLog(@&quot;第一次启动&quot;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        NSLog(@&quot;不是第一次启动&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="push隐藏tabbar"><a href="#push隐藏tabbar" class="headerlink" title="push隐藏tabbar"></a>push隐藏tabbar</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CYTeacherViewController *vc = [[CYTeacherViewController alloc]init];</span><br><span class="line">[vc setHidesBottomBarWhenPushed:YES];</span><br><span class="line">[self.navigationController pushViewController:vc animated:YES];</span><br></pre></td></tr></table></figure>

<h3 id="设置导航栏的返回按钮颜色"><a href="#设置导航栏的返回按钮颜色" class="headerlink" title="设置导航栏的返回按钮颜色"></a>设置导航栏的返回按钮颜色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.navigationController.navigationBar.tintColor = [UIColor whiteColor];</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/09/28/iOS%E4%B8%8A%E7%BA%BF%E5%8A%A0%E6%80%A5%E7%94%B3%E8%AF%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/09/28/iOS%E4%B8%8A%E7%BA%BF%E5%8A%A0%E6%80%A5%E7%94%B3%E8%AF%B7/" class="post-title-link" itemprop="url">iOS上线加急申请</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-09-28 16:11:33" itemprop="dateCreated datePublished" datetime="2016-09-28T16:11:33+08:00">2016-09-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="iOS上线加急申请"><a href="#iOS上线加急申请" class="headerlink" title="iOS上线加急申请"></a>iOS上线加急申请</h1><p>iOS app上传后审核通过需要一段时间，目前审核速度已经变快了，大约两天左右的时间，但是有的时候我们需要紧急修复bug就需要加急申请，这样能够很快进入审核、上架。</p>
<p>1、首先打开<a href="https://developer.apple.com/appstore/contact/appreviewteam/index.html" target="_blank" rel="noopener">申请网址</a><br>登录上你的AppleID，登录成功后显示如下：<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-073640.jpg" alt><br>选择<code>request an expedited app review</code>这个选项，<br>2、继续填写下面的信息（手机号码），<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-073712.jpg" alt><br>3、然后填写你要申请的App的信息<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-073721.jpg" alt>4、继续填写你的bug的描述（我每次都是中英文都写的。。）<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-073730.jpg" alt>最好点击send就好了。。。</p>
<p>很快你的App就会进入审核了。。。<br>我上次申请是当天下午3点左右申请的。第二天早晨就上架了，还是很快的。。。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/09/21/Mac%E5%AE%9E%E7%94%A8Tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/09/21/Mac%E5%AE%9E%E7%94%A8Tips/" class="post-title-link" itemprop="url">Mac实用Tips</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-09-21 17:44:19" itemprop="dateCreated datePublished" datetime="2016-09-21T17:44:19+08:00">2016-09-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mac实用Tips"><a href="#Mac实用Tips" class="headerlink" title="Mac实用Tips"></a>Mac实用Tips</h1><p><strong>Mac下查看cpu信息</strong></p>
<p>打开终端输入<code>sysctl -n machdep.cpu.brand_string</code>命令就可以<br><img src="https://zcwlwenblogimage.oss-cn-shanghai.aliyuncs.com/2016-12-30-073828.jpg" alt></p>
<p><strong>打开文件</strong></p>
<p>快捷键 Command + O</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/09/20/%E8%A7%86%E9%A2%91%E4%B8%8A%E4%BC%A0%E8%BD%AC%E7%A0%81%E5%B9%B3%E5%8F%B0%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/09/20/%E8%A7%86%E9%A2%91%E4%B8%8A%E4%BC%A0%E8%BD%AC%E7%A0%81%E5%B9%B3%E5%8F%B0%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/" class="post-title-link" itemprop="url">视频上传转码平台中遇到的问题与解决办法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-09-20 15:06:13" itemprop="dateCreated datePublished" datetime="2016-09-20T15:06:13+08:00">2016-09-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="视频上传转码平台中遇到的问题与解决办法"><a href="#视频上传转码平台中遇到的问题与解决办法" class="headerlink" title="视频上传转码平台中遇到的问题与解决办法"></a>视频上传转码平台中遇到的问题与解决办法</h1><p><strong>时间</strong> 2016-09-20</p>
<p>想要实现能够记录转码结果与转码时间的功能。</p>
<p>转码使用的是在php中调用popen()开一个进程去调用命令行函数去进行转码。</p>
<p>想要记录转码时间和转码进度。因为开一个异步的进程没有返回值所以没办法检测转码状态，所以只能想其他思路。<br>转码代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$cmd = &quot;转码操作命令&quot;;</span><br><span class="line">	//异步执行转码操作</span><br><span class="line">	pclose(popen($cmd, &apos;r&apos;));</span><br></pre></td></tr></table></figure>

<p>这里的解决办法是：</p>
<p>在开始转码前执行一个脚本，用来记录转码开始时间已经是否需要转码的那个操作。然后执行转操作。转码结束后在执行一个脚本用来记录此时的时间，已经转码结束。这样在数据库中就可以获得开始转码时间与转码结束的时间，就可以获得转码时间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$cmd = &quot;php -f 第一个脚本 &amp;&amp; 转码操作命令 &amp;&amp; php -f 第二个脚本&quot;;</span><br><span class="line">	//异步执行转码操作</span><br><span class="line">	pclose(popen($cmd, &apos;r&apos;));</span><br></pre></td></tr></table></figure>

<p>&amp;&amp;命令在命令行中用来串联两个命令所以我们这里可以记录转码时间。</p>
<p><strong>时间：</strong>2016年10月09日17:41:33</p>
<p>问题描述：执行php脚本是传参数遇到的问题。参数中有空格 导致这个参数编成了两个参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$zcw_one = &apos;zcw is&apos;;</span><br><span class="line">$cmd = &quot;php -f test.php $zcw_one&quot;</span><br><span class="line">system($cmd);</span><br></pre></td></tr></table></figure>

<p>这是好在test.php中通过argc取到的参数有三个 第一个是 test.php 、第二个是zcw、第三个是is。<br>我这里在传参数前把空格去掉<br>方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function trimall($str)//删除空格</span><br><span class="line">&#123;</span><br><span class="line">	$qian=array(&quot; &quot;,&quot;　&quot;,&quot;\t&quot;,&quot;\n&quot;,&quot;\r&quot;);</span><br><span class="line">	$hou=array(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;);</span><br><span class="line">	return str_replace($qian,$hou,$str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/09/20/MongoDB%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/09/20/MongoDB%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">MongoDB的进阶使用</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-09-20 14:00:00" itemprop="dateCreated datePublished" datetime="2016-09-20T14:00:00+08:00">2016-09-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="MongoDB的进阶使用"><a href="#MongoDB的进阶使用" class="headerlink" title="MongoDB的进阶使用"></a>MongoDB的进阶使用</h1><h2 id="在终端使用shell命令操作数据库"><a href="#在终端使用shell命令操作数据库" class="headerlink" title="在终端使用shell命令操作数据库"></a>在终端使用shell命令操作数据库</h2><h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><p>创建或者切换到当前数据库:</p>
<p><code>use DATABASE_NAME</code></p>
<p>使用<code>use</code>命令，如果当前数据库存在则是切换到对应的数据库，如果数据库不存在则是创建数据库。</p>
<p>查看数据库：</p>
<p><code>show dbs</code></p>
<p>删除数据库：</p>
<p>使用<code>use</code>命令进入到要删除的数据库中，然后执行删除命令：</p>
<p><code>db.dropDatabase()</code></p>
<p>就可以删除当前数据库了。</p>
<h3 id="集合操作（表）"><a href="#集合操作（表）" class="headerlink" title="集合操作（表）"></a>集合操作（表）</h3><p>查看当前数据库中包含的集合</p>
<p><code>show collections</code></p>
<p>创建集合</p>
<p><code>db.createCollection(集合名)</code></p>
<p>删除集合</p>
<p><code>db.COLLECTION_NAME.drop()</code></p>
<h3 id="文档操作"><a href="#文档操作" class="headerlink" title="文档操作"></a>文档操作</h3><p>插入文档</p>
<p><code>db.COLLECTION_NAME.insert(document)</code></p>
<p>查询文档</p>
<p><code>db.COLLECTION_NAME.find()</code></p>
<p>使用pretty()方法格式化返回</p>
<p><code>db.COLLECTION_NAME.find().pretty()</code></p>
<p>find()中可以添加条件筛选要查询的内容</p>
<p>更新文档</p>
<p><code>db.COLLECTION_NAME.update(SELECTIOIN_CRITERIA, UPDATED_DATA)</code></p>
<p>例子：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection-&gt;update(<span class="keyword">array</span>(<span class="string">"endTime"</span>=&gt;<span class="string">""</span>),<span class="keyword">array</span>(<span class="string">'$set'</span>=&gt;<span class="keyword">array</span>(<span class="string">"endTime"</span>=&gt;time())));</span><br><span class="line">$collection-&gt;update(<span class="keyword">array</span>(<span class="string">"isTranscoding"</span>=&gt;<span class="number">0</span>),<span class="keyword">array</span>(<span class="string">'$set'</span>=&gt;<span class="keyword">array</span>(<span class="string">"isTranscoding"</span>=&gt;<span class="number">1</span>)));</span><br></pre></td></tr></table></figure>
<p>删除文档</p>
<p><code>db.COLLECTION_NAME.remove(DELLETION_CRITTERIA)</code></p>
<p>如果remove()括号中不写东西默认删除全部内容</p>
<hr>
<h2 id="在php中操作MongoDB数据库"><a href="#在php中操作MongoDB数据库" class="headerlink" title="在php中操作MongoDB数据库"></a>在php中操作MongoDB数据库</h2><h3 id="连接和选择一个数据库"><a href="#连接和选择一个数据库" class="headerlink" title="连接和选择一个数据库"></a>连接和选择一个数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$m = new MongoClient(); // 连接默认主机和端口为：mongodb://localhost:27017</span><br><span class="line">$db = $m-&gt;test; // 获取名称为 &quot;test&quot; 的数据库</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$m = new MongoClient(); // 连接</span><br><span class="line">$db = $m-&gt;test; // 获取名称为 &quot;test&quot; 的数据库</span><br><span class="line">$collection = $db-&gt;createCollection(&quot;testCollection&quot;);</span><br><span class="line">echo &quot;集合创建成功&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="插入文档"><a href="#插入文档" class="headerlink" title="插入文档"></a>插入文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$m = new MongoClient();    // 连接到mongodb</span><br><span class="line">$db = $m-&gt;test;            // 选择一个数据库</span><br><span class="line">$collection = $db-&gt;testCollection; // 选择集合</span><br><span class="line">$document = array( </span><br><span class="line">	&quot;title&quot; =&gt; &quot;MongoDB&quot;, </span><br><span class="line">	&quot;description&quot; =&gt; &quot;database&quot;, </span><br><span class="line">	&quot;likes&quot; =&gt; 100,</span><br><span class="line">	&quot;url&quot; =&gt; &quot;http://www.runoob.com/mongodb/&quot;</span><br><span class="line">);</span><br><span class="line">$collection-&gt;insert($document);</span><br><span class="line">echo &quot;数据插入成功&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="查找文档"><a href="#查找文档" class="headerlink" title="查找文档"></a>查找文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$m = new MongoClient();    // 连接到mongodb</span><br><span class="line">$db = $m-&gt;test;            // 选择一个数据库</span><br><span class="line">$collection = $db-&gt; testCollection; // 选择集合</span><br><span class="line"></span><br><span class="line">$cursor = $collection-&gt;find();</span><br><span class="line">// 迭代显示文档标题</span><br><span class="line">foreach ($cursor as $document) &#123;</span><br><span class="line">	echo $document[&quot;title&quot;] . &quot;\n&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$m = new MongoClient();    // 连接到mongodb</span><br><span class="line">$db = $m-&gt;test;            // 选择一个数据库</span><br><span class="line">$collection = $db-&gt; testCollection; // 选择集合</span><br><span class="line">// 更新文档</span><br><span class="line">$collection-&gt;update(array(&quot;title&quot;=&gt;&quot;MongoDB&quot;), array(&apos;$set&apos;=&gt;array(&quot;title&quot;=&gt;&quot;MongoDB 教程&quot;)));</span><br><span class="line">// 显示更新后的文档</span><br><span class="line">$cursor = $collection-&gt;find();</span><br><span class="line">// 循环显示文档标题</span><br><span class="line">foreach ($cursor as $document) &#123;</span><br><span class="line">	echo $document[&quot;title&quot;] . &quot;\n&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$m = new MongoClient();    // 连接到mongodb</span><br><span class="line">$db = $m-&gt;test;            // 选择一个数据库</span><br><span class="line">$collection = $db-&gt;testCollection; // 选择集合</span><br><span class="line">   </span><br><span class="line">// 移除文档</span><br><span class="line">$collection-&gt;remove(array(&quot;title&quot;=&gt;&quot;MongoDB 教程&quot;), array(&quot;justOne&quot; =&gt; true));</span><br><span class="line"></span><br><span class="line">// 显示可用文档数据</span><br><span class="line">$cursor = $collection-&gt;find();</span><br><span class="line">foreach ($cursor as $document) &#123;</span><br><span class="line">	echo $document[&quot;title&quot;] . &quot;\n&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/09/12/Ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85ffmpeg%E5%92%8C%E4%BE%9D%E8%B5%96%E5%8C%85%E4%BB%A5%E5%8F%8Affmpeg%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/09/12/Ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85ffmpeg%E5%92%8C%E4%BE%9D%E8%B5%96%E5%8C%85%E4%BB%A5%E5%8F%8Affmpeg%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">Ubuntu下安装ffmpeg和依赖包以及ffmpeg的使用</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-09-12 17:43:53" itemprop="dateCreated datePublished" datetime="2016-09-12T17:43:53+08:00">2016-09-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Ubuntu下安装ffmpeg和依赖包以及ffmpeg的使用"><a href="#Ubuntu下安装ffmpeg和依赖包以及ffmpeg的使用" class="headerlink" title="Ubuntu下安装ffmpeg和依赖包以及ffmpeg的使用"></a>Ubuntu下安装ffmpeg和依赖包以及ffmpeg的使用</h1><p>多次尝试后通过<a href="http://www.liaoxuefeng.com/article/001456198314370db046cbe5e5a45388bf3ade4bc2c5cb0000" target="_blank" rel="noopener">廖雪峰这篇教程</a>安装成功了。<br><a href="https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu" target="_blank" rel="noopener">官方文档</a>也很详细，但是我安装失败了，原因应该是配置中路径的问题。这里不推荐使用。<br>使用廖雪峰老师的这篇教程安装成功环境如下：</p>
<blockquote>
<p>Distributor ID:    Ubuntu<br>Description:    Ubuntu 14.04.5 LTS<br>Release:    14.04<br>Codename:    trusty</p>
</blockquote>
<p>编译的时候的一些命令不要完全复制，要根据你下载的版本和压缩包类型使用不同的命令。</p>
<p>FFmpeg是最流行的开源视频转码工具包，在Ubuntu上可以直接通过apt-get安装，但是默认的编码器不提供x264这些non-free的编码器，所以需要自己编译。</p>
<p><strong>安装过程</strong></p>
<p>使用<code>apt-get update</code>和 <code>apt-get upgrade</code>把系统升级到最新版，然后安装下面的安装包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install autoconf automake build-essential libass-dev libfreetype6-dev  libtheora-dev libtool libvorbis-dev pkg-config texinfo zlib1g-dev unzip cmake yasm libx264-dev libmp3lame-dev libopus-dev</span><br></pre></td></tr></table></figure>

<p>FFmpeg依赖的几个软件包有个最低版本要求：</p>
<blockquote>
<p>yasm &gt;= 1.2.0<br>libx264-dev &gt;= 0.118<br>libmp3lame-dev &gt;= 3.98.3<br>libopus-dev &gt;= 1.1</p>
</blockquote>
<p>在这几个包在Ubuntu 14.04上都符合FFmpeg的要求，所以可以直接用<code>apt-get</code>安装。<br>编译的bin目录放在<strong>/opt/</strong>目录下<br>先在<strong>/opt/</strong>目录下创建三个文件夹，分别为<strong>ffmpeg_sources、ffmpeg_build、bin</strong>。<br>然后下载源码包放到<strong>/opt/ffmpeg_sources/</strong>目录下。<br>源码包下载地址：（请自己选择最新的版本下载）<br>x265：<a href="https://bitbucket.org/multicoreware/x265/downloads" target="_blank" rel="noopener">https://bitbucket.org/multicoreware/x265/downloads</a></p>
<p>fdk-aac：<a href="https://github.com/mstorsjo/fdk-aac/releases" target="_blank" rel="noopener">https://github.com/mstorsjo/fdk-aac/releases</a></p>
<p>ffmpeg：<a href="http://ffmpeg.org/download.html" target="_blank" rel="noopener">http://ffmpeg.org/download.html</a></p>
<p><strong>编译x265</strong><br>依次执行下面的命令这里你根据你下载的文件去执行，这里下载的是1.9版本）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/ffmpeg_sources</span><br><span class="line">tar zxvf x265_1.9.tar.gz</span><br><span class="line">cd x265_1.9/build/linux</span><br><span class="line">PATH=&quot;/opt/bin:$PATH&quot; cmake -G &quot;Unix Makefiles&quot; -DCMAKE_INSTALL_PREFIX=&quot;/opt/ffmpeg_build&quot; -DENABLE_SHARED:bool=off ../../source</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line">make distclean</span><br></pre></td></tr></table></figure>

<p><strong>编译fdk-aac</strong></p>
<p>依次执行下面的命令 （这里你根据你下载的文件去执行，这里下载的是0.1.4版本）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/ffmpeg_sources</span><br><span class="line">tar zxvf fdk-aac-v0.1.4.tar.gz</span><br><span class="line">cd fdk-aac-0.1.4</span><br><span class="line">autoreconf -fiv</span><br><span class="line">./configure --prefix=&quot;/opt/ffmpeg_build&quot; --disable-shared</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line">make distclean</span><br></pre></td></tr></table></figure>
<p><strong>编译ffmpeg</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/ffmpeg_sources</span><br><span class="line">unzip FFmpeg-release-3.0.zip</span><br><span class="line">cd FFmpeg-release-3.0</span><br><span class="line">PATH=&quot;/opt/bin:$PATH&quot; PKG_CONFIG_PATH=&quot;/opt/ffmpeg_build/lib/pkgconfig&quot; ./configure \</span><br><span class="line">  --prefix=&quot;/opt/ffmpeg_build&quot; \</span><br><span class="line">  --pkg-config-flags=&quot;--static&quot; \</span><br><span class="line">  --extra-cflags=&quot;-I/opt/ffmpeg_build/include&quot; \</span><br><span class="line">  --extra-ldflags=&quot;-L/opt/ffmpeg_build/lib&quot; \</span><br><span class="line">  --bindir=&quot;/opt/bin&quot; \</span><br><span class="line">  --enable-gpl \</span><br><span class="line">  --enable-libass \</span><br><span class="line">  --enable-libfdk-aac \</span><br><span class="line">  --enable-libfreetype \</span><br><span class="line">  --enable-libmp3lame \</span><br><span class="line">  --enable-libopus \</span><br><span class="line">  --enable-libtheora \</span><br><span class="line">  --enable-libvorbis \</span><br><span class="line">  --enable-libvpx \</span><br><span class="line">  --enable-libx264 \</span><br><span class="line">  --enable-libx265 \</span><br><span class="line">  --enable-nonfree</span><br><span class="line">PATH=&quot;/opt/bin:$PATH&quot; make</span><br><span class="line">make install</span><br><span class="line">make distclean</span><br><span class="line">hash -r</span><br></pre></td></tr></table></figure>

<p>编译时间很长，成功的话会在<code>/opt/bin</code>目录下出现ffmpeg、ffprobe、ffserver程序。<br>最后，创建几个软连接，便于任意用户在任意目录下直接调用ffmpeg：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ln -s /opt/bin/ffmpeg /usr/bin/ffmpeg</span><br><span class="line">ln -s /opt/bin/ffprobe /usr/bin/ffprobe</span><br><span class="line">ln -s /opt/bin/ffserver /usr/bin/ffserver</span><br></pre></td></tr></table></figure>

<p>成功后执行<code>ffmpeg -version</code>就可以查看到ffmpeg的版本信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp1c4rg6py5h26u4210bZ:/opt/bin# ffmpeg -version</span><br><span class="line">ffmpeg version 3.2.4 Copyright (c) 2000-2017 the FFmpeg developers</span><br><span class="line">built with gcc 5.4.0 (Ubuntu 5.4.0-6ubuntu1~16.04.4) 20160609</span><br><span class="line">configuration: --prefix=/opt/ffmpeg_build --pkg-config-flags=--static --extra-cflags=-I/opt/ffmpeg_build/include --extra-ldflags=-L/opt/ffmpeg_build/lib --bindir=/opt/bin --enable-gpl --enable-libass --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libx264 --enable-nonfree</span><br><span class="line">libavutil      55. 34.101 / 55. 34.101</span><br><span class="line">libavcodec     57. 64.101 / 57. 64.101</span><br><span class="line">libavformat    57. 56.101 / 57. 56.101</span><br><span class="line">libavdevice    57.  1.100 / 57.  1.100</span><br><span class="line">libavfilter     6. 65.100 /  6. 65.100</span><br><span class="line">libswscale      4.  2.100 /  4.  2.100</span><br><span class="line">libswresample   2.  3.100 /  2.  3.100</span><br><span class="line">libpostproc    54.  1.100 / 54.  1.100</span><br></pre></td></tr></table></figure>

<p>ffmpeg是转码程序，ffprobe可以用来分析视频文件，ffserver可以实现流媒体服务器。</p>
<p><strong>使用ffmpeg</strong></p>
<p>直接在终端执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i yanshi.flv -c:v libx264 -b:v 1024k -c:a libfdk_aac -b:a 128k -ar 16000 final.mp4</span><br></pre></td></tr></table></figure>

<p>这里的<strong>yanshi.flv</strong>是要转码的文件，<strong>final.mp4</strong>是转码后的文件。</p>
<p><strong>ffmpeg的常用参数详解</strong><br><strong>主要参数</strong></p>
<ul>
<li>-i ——设置输入文档名</li>
<li>-f ——设置输出格式</li>
<li>-y——若输出文件已存在时则覆盖文件</li>
<li>-fs——超过指定的文件大小时则结束转换</li>
<li>-ss——从指定时间开始转换</li>
<li>-t从-ss时间开始转换（如-ss 00:00:01.00 -t 00:00:10.00即从00:00:01.00开始到00:00:11.00</li>
<li>-title——设置标题</li>
<li>-timestamp——设置时间戳</li>
<li>-vsync——增减Frame使影音同步</li>
</ul>
<p><strong>视频参数</strong></p>
<ul>
<li>-b:v——设置视频流量，默认为200Kbit/秒</li>
<li>-r——设置帧率值，默认为25</li>
<li>-s——设置画面的宽与高</li>
<li>-aspect——设置画面的比例</li>
<li>-vn——不处理视频，于仅针对声音做处理时使用</li>
<li>-vcodec( -c:v )——设置视频视频编解码器，未设置时则使用与输入文件相同之编解码器</li>
</ul>
<p><strong>音频参数</strong></p>
<ul>
<li>-b:a——设置每Channel（最近的SVN版为所有Channel的总合）的流量</li>
<li>-ar——设置采样率</li>
<li>-ac——设置声音的Channel数</li>
<li>-acodec ( -c:a ) ——设置声音编解码器，未设置时与视频相同，使用与输入文件相同之编解码器</li>
<li>-an——不处理声音，于仅针对视频做处理时使用</li>
<li>-vol——设置音量大小，256为标准音量。（要设置成两倍音量时则输入512，依此类推。）</li>
</ul>
<p><strong>注意事项</strong></p>
<ul>
<li>以-b:v及-b:a首选项流量时，根据使用的ffmpeg版本，须注意单位会有kbits/sec与bits/sec的不同。（可用ffmpeg -h显示说明来确认单位。）<br>例如，单位为bits/sec的情况时，欲指定流量64kbps时需输入 -b:a 64k；单位为kbits/sec的情况时则需输入 -b:a 64。</li>
<li>以-acodec及-vcodec所指定的编解码器名称，会根据使用的ffmpeg版本而有所不同。例如使用AAC编解码器时，会有输入aac与libfaac的情况。此外，编解码器有分为仅供解码时使用与仅供编码时使用，因此一定要利用ffmpeg -formats确认输入的编解码器是否能运作。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/09/08/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/09/08/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux常用命令</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-09-08 16:59:22" itemprop="dateCreated datePublished" datetime="2016-09-08T16:59:22+08:00">2016-09-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Linux常用命令"><a href="#Linux常用命令" class="headerlink" title="Linux常用命令"></a>Linux常用命令</h1><h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a><strong>文件</strong></h2><ul>
<li><code>ls</code> 命令 ——显示当前目录中的文件</li>
<li><code>ls -l</code> 命令——查看详细信息</li>
</ul>
<hr>
<h2 id="文件权限："><a href="#文件权限：" class="headerlink" title="文件权限："></a><strong>文件权限：</strong></h2><p>总共十位，第一位代表文件类型，后面每三位一组分别代表，文件所有者权限、所属组其他用户权限、其他人权限。</p>
<p><code>-rw-r--r--</code>第一位<code>-</code>代表文件类型为文件，<code>rw-</code>代表文件所有者对这个文件可读可写，<code>r--</code>代表所属组其他用户对这个文件可读，<code>r--</code>代表可读。</p>
<p><code>drwxrwxrwx</code>第一位<code>d</code>代表文件类型为目录，<code>rwx</code>代表文件所有者对这个文件可读可写可执行，后面的两个同理。</p>
<p>修改文件命令：</p>
<p><code>chmod</code>修改权限</p>
<p><code>chown</code>修改文件所有者</p>
<p><code>chgrp</code>修改文件所有组</p>
<hr>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zcwlwen.cn/2016/09/07/Chrome%E8%84%B1%E7%A6%BB%E9%BC%A0%E6%A0%87%E4%BD%BF%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zcwlwen">
      <meta itemprop="description" content="iOS,linux,shell,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZCW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/09/07/Chrome%E8%84%B1%E7%A6%BB%E9%BC%A0%E6%A0%87%E4%BD%BF%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" class="post-title-link" itemprop="url">Chrome快捷键</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-09-07 17:26:05" itemprop="dateCreated datePublished" datetime="2016-09-07T17:26:05+08:00">2016-09-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-09 09:33:52" itemprop="dateModified" datetime="2019-05-09T09:33:52+08:00">2019-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%88%E7%8E%87/" itemprop="url" rel="index">
                    <span itemprop="name">效率</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="优雅的使用Chrome快捷键"><a href="#优雅的使用Chrome快捷键" class="headerlink" title="优雅的使用Chrome快捷键"></a>优雅的使用Chrome快捷键</h1><p> 这里只介绍<strong>Mac</strong>上Chrome上的快捷键</p>
<p>一直使用Chrome但是没有系统的看过他的所有快捷键的使用。之前虽然也在使用快捷键，但是并没有完全使用快捷键。<br>今天查看了一下Chrome的帮助文档，重新学习一些使用快捷键。并且附上我认为的使用频率。</p>
<hr>
<table>
<thead>
<tr>
<th align="left">操作</th>
<th align="right">快捷键</th>
<th align="right">使用频率</th>
</tr>
</thead>
<tbody><tr>
<td align="left">打开新的窗口</td>
<td align="right">⌘ + n</td>
<td align="right">⭐️</td>
</tr>
<tr>
<td align="left">跳转到下一个打开的标签页</td>
<td align="right">⌘ + Option + 向右箭头键</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">跳转到上一个打开的标签页</td>
<td align="right">⌘ + Option + 向左箭头键</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">跳转到特定标签页</td>
<td align="right">⌘ + 1 到 ⌘ + 8</td>
<td align="right">⭐️</td>
</tr>
<tr>
<td align="left">跳转到最后一个标签页</td>
<td align="right">⌘ + 9</td>
<td align="right">⭐️</td>
</tr>
<tr>
<td align="left">打开当前标签页浏览记录中记录的上一个页面（用手势更方便）</td>
<td align="right">⌘ + [ 或 ⌘ + 向左箭头键</td>
<td align="right">⭐️</td>
</tr>
<tr>
<td align="left">打开当前标签页浏览记录中记录的下一个页面（用手势更方便）</td>
<td align="right">⌘ + ] 或 ⌘ + 向右箭头键</td>
<td align="right">⭐️</td>
</tr>
<tr>
<td align="left">打开书签管理器</td>
<td align="right">⌘ + Option + b</td>
<td align="right">⭐️⭐️⭐️</td>
</tr>
<tr>
<td align="left">在新标签页中打开“历史记录”页</td>
<td align="right">⌘ + y</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">在新标签页中打开“下载内容”页</td>
<td align="right">⌘ + Shift + j</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">打开查找栏搜索当前网页</td>
<td align="right">⌘ + f</td>
<td align="right">⭐️⭐️⭐️</td>
</tr>
<tr>
<td align="left">打开“开发者工具”</td>
<td align="right">⌘ + Option + i</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">为网站名称添加 www. 和 .com，并在当前标签页中打开该网站</td>
<td align="right">输入网站名称并按 Control + Enter 键</td>
<td align="right">⭐️</td>
</tr>
<tr>
<td align="left">跳转到地址栏</td>
<td align="right">⌘ + l</td>
<td align="right">⭐️⭐️⭐️</td>
</tr>
<tr>
<td align="left">重新加载当前网页</td>
<td align="right">⌘ + r</td>
<td align="right">⭐️⭐️⭐️⭐️</td>
</tr>
<tr>
<td align="left">将当前网页保存为书签</td>
<td align="right">⌘ + d</td>
<td align="right">⭐️⭐️⭐️⭐️⭐️</td>
</tr>
<tr>
<td align="left">开启或关闭全屏模式</td>
<td align="right">⌘ + Ctrl + f</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">放大网页上的所有内容</td>
<td align="right">⌘ 和 +</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">缩小网页上的所有内容</td>
<td align="right">⌘ 和 -</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">将网页上的所有内容恢复到默认大小</td>
<td align="right">⌘ + 0</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">向下滚动网页，一次一个屏幕</td>
<td align="right">空格键</td>
<td align="right">⭐️⭐️</td>
</tr>
<tr>
<td align="left">向上滚动网页，一次一个屏幕</td>
<td align="right">Shift + 空格键</td>
<td align="right">⭐️⭐️</td>
</tr>
</tbody></table>
<hr>
<p>更多快捷键的使用参考Chrome官方介绍。<br>这里只介绍了Mac上的快捷键，Windows请查看文档。<br>很多系统级类似的快捷键没有介绍。</p>
<p>参考地址：<br><a href="https://support.google.com/chrome/answer/157179?hl=zh-Hans" target="_blank" rel="noopener">Chrome帮助</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="zcwlwen"
    src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">zcwlwen</p>
  <div class="site-description" itemprop="description">iOS,linux,shell,</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zcwlwen" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;zcwlwen" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zcwlwen@gmail.com" title="E-Mail &amp;rarr; mailto:zcwlwen@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zcwlwen</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.3
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  

</body>
</html>
